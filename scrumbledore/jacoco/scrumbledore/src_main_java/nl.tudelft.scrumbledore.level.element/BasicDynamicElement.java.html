<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="nl"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>BasicDynamicElement.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=2;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">scrumbledore (7-mrt-2018 16:32:47)</a> &gt; <a href="../../index.html" class="el_group">scrumbledore</a> &gt; <a href="../index.html" class="el_bundle">src/main/java</a> &gt; <a href="index.source.html" class="el_package">nl.tudelft.scrumbledore.level.element</a> &gt; <span class="el_source">BasicDynamicElement.java</span></div><h1>BasicDynamicElement.java</h1><pre class="source lang-java linenums">package nl.tudelft.scrumbledore.level.element;

import java.util.ArrayList;
import nl.tudelft.scrumbledore.level.Vector;
import nl.tudelft.scrumbledore.sprite.Sprite;

/**
 * An abstract class as a basic class for representing dynamic level elements.
 * 
 * @author Floris Doolaard
 */
@SuppressWarnings(&quot;PMD.TooManyMethods&quot;)
public abstract class BasicDynamicElement implements DynamicElement {
  private Vector position;
  private Vector size;
  private Vector speed;
  private Vector friction;
  private boolean gravity;
  private ArrayList&lt;LevelElementAction&gt; actions;

  /**
   * Create a new LevelElement instance.
   * 
   * @param position
   *          Position of the element in the level.
   *          
   * @param size
   *          Size of the element.
   */
<span class="fc" id="L30">  public BasicDynamicElement(Vector position, Vector size) {</span>
<span class="fc" id="L31">    this.position = position;</span>
<span class="fc" id="L32">    this.size = size;</span>
<span class="fc" id="L33">    this.speed = new Vector(0, 0);</span>
<span class="fc" id="L34">    this.friction = new Vector(0, 0);</span>
<span class="fc" id="L35">    this.gravity = false;</span>
<span class="fc" id="L36">    this.actions = new ArrayList&lt;LevelElementAction&gt;();</span>

<span class="fc" id="L38">  }</span>

  /**
   * Get the position vector of this element.
   * 
   * @return Position Vector.
   */
  public Vector getPosition() {
<span class="fc" id="L46">    return position;</span>
  }

  /**
   * Get the X coordinate of the element.
   * 
   * @return X coordinate of the element.
   */
  public double posX() {
<span class="fc" id="L55">    return position.getX();</span>
  }

  /**
   * Get the Y coordinate of the element.
   * 
   * @return Y coordinate of the element.
   */
  public double posY() {
<span class="fc" id="L64">    return position.getY();</span>
  }

  /**
   * Get the size vector of this element.
   * 
   * @return Size Vector.
   */
  public Vector getSize() {
<span class="fc" id="L73">    return size;</span>
  }

  /**
   * Get the width of the element.
   * 
   * @return Width of the element.
   */
  public double width() {
<span class="fc" id="L82">    return size.getX();</span>
  }

  /**
   * Get the height of the element.
   * 
   * @return Height of the element.
   */
  public double height() {
<span class="fc" id="L91">    return size.getY();</span>
  }

  /**
   * Get the speed vector of this element.
   * 
   * @return Speed Vector.
   */
  public Vector getSpeed() {
<span class="fc" id="L100">    return speed;</span>
  }

  /**
   * Get the horizontal speed of the element.
   * 
   * @return Horizontal speed of the element.
   */
  public double hSpeed() {
<span class="fc" id="L109">    return speed.getX();</span>
  }

  /**
   * Get the vertical speed of the element.
   * 
   * @return Vertical speed of the element.
   */
  public double vSpeed() {
<span class="fc" id="L118">    return speed.getY();</span>
  }

  /**
   * Get the friction vector of this element.
   * 
   * @return Friction Vector.
   */
  public Vector getFriction() {
<span class="fc" id="L127">    return friction;</span>
  }

  /**
   * Get the horizontal friction.
   * 
   * @return Horizontal friction.
   */
  public double hFric() {
<span class="fc" id="L136">    return friction.getX();</span>
  }

  /**
   * Get the vertical friction.
   * 
   * @return Vertical friction.
   */
  public double vFric() {
<span class="fc" id="L145">    return friction.getY();</span>
  }

  /**
   * Stop this LevelElement's vertical movement.
   */
  public void stopVertically() {
<span class="fc" id="L152">    getSpeed().setY(0);</span>
<span class="fc" id="L153">  }</span>

  /**
   * Stop this LevelElement's horizontal movement.
   */
  public void stopHorizontally() {
<span class="fc" id="L159">    getSpeed().setX(0);</span>
<span class="fc" id="L160">  }</span>

  /**
   * Check whether this LevelElement is affected by Gravity.
   * 
   * @return Whether this LevelElement is affected by Gravity.
   */
  public boolean hasGravity() {
<span class="fc" id="L168">    return gravity;</span>
  }

  /**
   * Set the property determining whether this LevelElement is affected by gravity.
   * 
   * @param gravity
   *          Whether this LevelElement is affected by Gravity.
   */
  public void setGravity(boolean gravity) {
<span class="fc" id="L178">    this.gravity = gravity;</span>
<span class="fc" id="L179">  }</span>

  /**
   * Get the absolute Y-coordinate of the top of this element, given the position and size.
   * 
   * @return Y-coordinate of top.
   */
  public double getTop() {
<span class="fc" id="L187">    return position.getY() - size.getY() / 2;</span>
  }

  /**
   * Get the absolute Y-coordinate of the bottom of this element, given the position and size.
   * 
   * @return Y-coordinate of bottom.
   */
  public double getBottom() {
<span class="fc" id="L196">    return position.getY() + size.getY() / 2;</span>
  }

  /**
   * Get the absolute X-coordinate of the left side of this element, given the position and size.
   * 
   * @return X-coordinate of left side.
   */
  public double getLeft() {
<span class="fc" id="L205">    return position.getX() - size.getX() / 2;</span>
  }

  /**
   * Get the absolute X-coordinate of the right side of this element, given the position and size.
   * 
   * @return X-coordinate of right side.
   */
  public double getRight() {
<span class="fc" id="L214">    return position.getX() + size.getX() / 2;</span>
  }

  /**
   * Get the distance to another LevelElement.
   * 
   * @param other
   *          The other element to measure the distance to.
   *          
   * @return The distance between two LevelElements.
   */
  public double distance(LevelElement other) {
<span class="fc" id="L226">    return getPosition().distance(other.getPosition());</span>
  }

  /**
   * Check whether another element is within range of this element using a circular radius by
   * computing the distance.
   * 
   * @param other
   *          The other element.
   *          
   * @param range
   *          The range (of the circle).
   *          
   * @return Whether another element is within range of this element.
   */
  public boolean inRadiusRangeOf(LevelElement other, double range) {
<span class="fc bfc" id="L242" title="All 2 branches covered.">    return distance(other) &lt;= range;</span>
  }

  /**
   * Check whether another element is within range of this element using a box. The box is a square
   * axis-aligned bounding box, with dimensions of twice the given range. It has the position of
   * this element as its center.
   * 
   * @param other
   *          The other element.
   *          
   * @param range
   *          The range (a half of the dimensions of the square box).
   *          
   * @return Whether another element is within range of this element.
   */
  public boolean inBoxRangeOf(LevelElement other, double range) {
<span class="pc bpc" id="L259" title="2 of 4 branches missed.">    boolean inX = (other.posX() &gt;= posX() - range &amp;&amp; other.posX() &lt;= posX() + range);</span>
<span class="pc bpc" id="L260" title="1 of 4 branches missed.">    boolean inY = (other.posY() &gt;= posY() - range &amp;&amp; other.posY() &lt;= posY() + range);</span>
<span class="pc bpc" id="L261" title="1 of 4 branches missed.">    return inX &amp;&amp; inY;</span>
  }

  /**
   * Snap a LevelElement to the left side of another LevelElement.
   * 
   * @param other
   *          The LevelElement to be snapped to.
   */
  public void snapLeft(LevelElement other) {
<span class="fc" id="L271">    double offset = getSize().getX() / 2;</span>
<span class="fc" id="L272">    double newPos = other.getLeft() - offset;</span>
<span class="fc" id="L273">    getPosition().setX(newPos);</span>
<span class="fc" id="L274">  }</span>

  /**
   * Snap a LevelElement to the right side of another LevelElement.
   * 
   * @param other
   *          The LevelElement to be snapped to.
   */
  public void snapRight(LevelElement other) {
<span class="fc" id="L283">    double offset = getSize().getX() / 2;</span>
<span class="fc" id="L284">    double newPos = other.getRight() + offset;</span>
<span class="fc" id="L285">    getPosition().setX(newPos);</span>
<span class="fc" id="L286">  }</span>

  /**
   * Snap a LevelElement to the top side of another LevelElement.
   * 
   * @param other
   *          The LevelElement to be snapped to.
   */
  public void snapTop(LevelElement other) {
<span class="fc" id="L295">    double offset = getSize().getY() / 2;</span>
<span class="fc" id="L296">    double newPos = other.getTop() - offset;</span>
<span class="fc" id="L297">    getPosition().setY(newPos);</span>
<span class="fc" id="L298">  }</span>

  /**
   * Snap a LevelElement to the bottom side of another LevelElement.
   * 
   * @param other
   *          The LevelElement to be snapped to.
   */
  public void snapBottom(LevelElement other) {
<span class="fc" id="L307">    double offset = getSize().getY() / 2;</span>
<span class="fc" id="L308">    double newPos = other.getBottom() + offset;</span>
<span class="fc" id="L309">    getPosition().setY(newPos);</span>
<span class="fc" id="L310">  }</span>

  /**
   * Add an action to be performed in the next step.
   * 
   * @param action
   *          A LevelElementAction
   */
  public void addAction(LevelElementAction action) {
<span class="fc bfc" id="L319" title="All 2 branches covered.">    if (!hasAction(action)) {</span>
<span class="fc" id="L320">      actions.add(action);</span>
<span class="fc" id="L321">      setLastMove(action);</span>
    }
<span class="fc" id="L323">  }</span>

  /**
   * Remove all actions from the queue.
   */
  public void clearActions() {
<span class="fc" id="L329">    actions.clear();</span>
<span class="fc" id="L330">  }</span>
  
  /**
   * Gives the list of actions of the level element.
   * @return a list of actions.
   */
  public ArrayList&lt;LevelElementAction&gt; getActions() {
<span class="fc" id="L337">    return actions;</span>
  }

  /**
   * Check whether the given action is queued for the next step.
   * 
   * @param action
   *          A LevelElementAction.
   * @return Whether the given action is queued.
   */
  public boolean hasAction(LevelElementAction action) {
<span class="fc" id="L348">    return actions.contains(action);</span>
  }

  /**
   * Remove the given action from the actions queue.
   * 
   * @param action
   *          A LevelElementAction.
   */
  public void removeAction(LevelElementAction action) {
<span class="fc" id="L358">    actions.remove(action);</span>
<span class="fc" id="L359">  }</span>
  
  /**
   * Retrieve a set of Sprites to be drawn in the current cycle at the position of this Level
   * Element.
   * 
   * @param steps
   *          The absolute exact number of steps since the game was started.
   *          
   * @return Sprites to be drawn.
   */
  public abstract ArrayList&lt;Sprite&gt; getSprites(double steps);
  
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.7.9.201702052155</span>scrumbledore (7-mrt-2018 16:32:47)</div></body></html>